(this["webpackJsonpall-the-playlists"]=this["webpackJsonpall-the-playlists"]||[]).push([[0],{27:function(t,e,a){},47:function(t,e,a){},49:function(t,e,a){},50:function(t,e,a){},51:function(t,e,a){},52:function(t,e,a){"use strict";a.r(e);var s=a(4),n=a.n(s),r=a(21),i=a.n(r),c=(a(27),a(3)),l=a.n(c),o=a(5),u=a(6),h=a(7),p=a(2),b=a(9),d=a(8),m=a(22),j=a.n(m),f=a.p+"static/media/logo.6ce24c58.svg",y=(a(47),a(0)),g=function(t){if(!t.item)return null;var e={backgroundImage:"url(".concat(t.item.album.images[0].url,")")},a={width:100*t.progress_ms/t.item.duration_ms+"%"};return Object(y.jsx)("div",{className:"App",children:Object(y.jsxs)("div",{className:"main-wrapper",children:[Object(y.jsx)("div",{className:"now-playing__img",children:Object(y.jsx)("img",{src:t.item.album.images[0].url,alt:"Album Artwork"})}),Object(y.jsxs)("div",{className:"now-playing__side",children:[Object(y.jsx)("div",{className:"now-playing__name",children:t.item.name}),Object(y.jsx)("div",{className:"now-playing__artist",children:t.item.artists[0].name}),Object(y.jsx)("div",{className:"now-playing__status",children:t.is_playing?"Playing":"Paused"}),Object(y.jsxs)("div",{className:"progress",children:[Object(y.jsx)("div",{className:"progress__bar",style:a})," "]})]}),Object(y.jsx)("div",{className:"background",style:e})," "]})})},v=(a(49),function(t){Object(b.a)(a,t);var e=Object(d.a)(a);function a(t){var s;return Object(u.a)(this,a),(s=e.call(this,t)).state={search:"",filters:{track:!0,artist:!0,album:!0,playlist:!0},onSubmit:t.onSubmit},s.handleChange=s.handleChange.bind(Object(p.a)(s)),s.handleSubmit=s.handleSubmit.bind(Object(p.a)(s)),s}return Object(h.a)(a,[{key:"handleChange",value:function(t){this.setState({search:t.target.value})}},{key:"handleSubmit",value:function(t){this.state.onSubmit(this.state.search),t.preventDefault()}},{key:"render",value:function(){return Object(y.jsxs)("form",{className:"search",onSubmit:this.handleSubmit,children:[Object(y.jsxs)("div",{children:[Object(y.jsx)("input",{className:"input__search",type:"search",value:this.state.search,onChange:this.handleChange}),Object(y.jsx)("input",{className:"btn__search",type:"submit",value:"Search"})]}),Object(y.jsxs)("label",{children:[Object(y.jsx)("input",{className:"filter",type:"checkbox",value:this.state.filters.track}),"Track"]}),Object(y.jsxs)("label",{children:[Object(y.jsx)("input",{className:"filter",type:"checkbox",value:this.state.filters.artist}),"Artist"]}),Object(y.jsxs)("label",{children:[Object(y.jsx)("input",{className:"filter",type:"checkbox",value:this.state.filters.album}),"Album"]}),Object(y.jsxs)("label",{children:[Object(y.jsx)("input",{className:"filter",type:"checkbox",value:this.state.filters.playlist}),"Playlist"]})]})}}]),a}(s.Component)),k=(a(50),function(t){Object(b.a)(a,t);var e=Object(d.a)(a);function a(t){var s;return Object(u.a)(this,a),(s=e.call(this,t)).state={artists:[],albums:[],tracks:[],playlists:[]},s}return Object(h.a)(a,[{key:"render",value:function(){var t=this;if(console.log(this.props.tracks),!this.props.tracks)return null;var e=this.props.tracks.map((function(e){return Object(y.jsxs)("li",{className:"search-result",onClick:Object(o.a)(l.a.mark((function a(){return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.props.play(e.uri);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}),a)}))),children:[Object(y.jsx)("img",{src:e.album.images[2].url,alt:"album art"}),Object(y.jsx)("span",{className:"track__name",children:e.name}),Object(y.jsx)("span",{className:"track__artist",children:e.artists[0].name}),Object(y.jsx)("span",{className:"track__album",children:e.album.name})]},e.uri)}));return Object(y.jsx)("ul",{className:"tracks",children:e})}}]),a}(s.Component)),O=(a(51),["user-read-currently-playing","user-read-playback-state","user-modify-playback-state"]),x=window.location.hash.substring(1).split("&").reduce((function(t,e){if(e){var a=e.split("=");t[a[0]]=decodeURIComponent(a[1])}return t}),{});window.location.hash="";var _=function(t){Object(b.a)(a,t);var e=Object(d.a)(a);function a(){var t;return Object(u.a)(this,a),(t=e.call(this)).state={token:null,item:{album:{images:[{url:""}]},name:"",artists:[{name:""}],duration_ms:0},is_playing:"Paused",progress_ms:0,searchResults:{}},t.getCurrentlyPlaying=t.getCurrentlyPlaying.bind(Object(p.a)(t)),t.tick=t.tick.bind(Object(p.a)(t)),t.disconnectSpotify=t.disconnectSpotify.bind(Object(p.a)(t)),t.onSearch=t.onSearch.bind(Object(p.a)(t)),t.onError=t.onError.bind(Object(p.a)(t)),t.renderSearch=t.renderSearch.bind(Object(p.a)(t)),t.playSong=t.playSong.bind(Object(p.a)(t)),t}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var t=Object(o.a)(l.a.mark((function t(){var e,a,s,n=this;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=x.access_token,a=window.localStorage.getItem("spotify_token"),e||a){t.next=4;break}return t.abrupt("return");case 4:return e?(s=e,window.localStorage.setItem("spotify_token",e)):a&&(s=a),this.setState({token:s}),this.spotify=j.a.create({baseURL:"https://api.spotify.com/v1",headers:{Authorization:"Bearer ".concat(s)}}),t.next=9,this.getCurrentlyPlaying(s);case 9:this.interval=setInterval((function(){return n.tick()}),5e3);case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"tick",value:function(){this.state.token&&this.getCurrentlyPlaying(this.state.token)}},{key:"onError",value:function(t){t.response&&401===t.response.status?this.disconnectSpotify():console.log(t)}},{key:"getCurrentlyPlaying",value:function(){var t=Object(o.a)(l.a.mark((function t(){var e,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.spotify.get("/me/player");case 3:if(e=t.sent){t.next=7;break}return this.setState({no_data:!0}),t.abrupt("return");case 7:a=e.data,this.setState({item:a.item,is_playing:a.is_playing,progress_ms:a.progress_ms,no_data:!1}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),this.onError(t.t0);case 14:case"end":return t.stop()}}),t,this,[[0,11]])})));return function(){return t.apply(this,arguments)}}()},{key:"onSearch",value:function(){var t=Object(o.a)(l.a.mark((function t(e){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.spotify.get("/search",{params:{q:e,type:"album,artist,playlist,track"}});case 3:(a=t.sent)||this.setState({searchResults:null}),this.setState({searchResults:a.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),this.onError(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},{key:"disconnectSpotify",value:function(){window.localStorage.removeItem("spotify_token"),window.location.reload(!0)}},{key:"playSong",value:function(){var t=Object(o.a)(l.a.mark((function t(e){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.spotify.put("/me/player/play",{uris:[e]});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),this.onError(t.t0);case 8:case"end":return t.stop()}}),t,this,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()},{key:"renderSearch",value:function(){return console.log(this.state.searchResults),this.state.searchResults&&this.state.searchResults.tracks&&this.state.searchResults.tracks.items?Object(y.jsx)(k,{tracks:this.state.searchResults.tracks.items,play:this.playSong}):null}},{key:"render",value:function(){return Object(y.jsx)("div",{className:"App",children:Object(y.jsxs)("header",{className:"App-header",children:[Object(y.jsx)("img",{src:f,className:"App-logo",alt:"logo"}),!this.state.token&&Object(y.jsx)("a",{className:"btn btn--loginApp-link",href:"".concat("https://accounts.spotify.com/authorize","?client_id=").concat("5fc72c06cd0d48cdab58b0364d6a7a8d","&redirect_uri=").concat("http://localhost:3000","&scope=").concat(O.join("%20"),"&response_type=token&show_dialog=true"),children:"Login to spotify"}),this.state.token&&!this.state.no_data&&Object(y.jsxs)("div",{children:[Object(y.jsx)(v,{onSubmit:this.onSearch}),this.renderSearch(),Object(y.jsx)(g,{item:this.state.item,is_playing:this.state.is_playing,progress_ms:this.progress_ms}),Object(y.jsx)("button",{className:"btn btn--loginApp-link",onClick:this.disconnectSpotify,children:"Disconnect from Spotify"})]}),this.state.no_data&&Object(y.jsx)("p",{children:"You need to be playing a song on Soptify for something to appear here."})]})})}}]),a}(s.Component),S=_,w=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,53)).then((function(e){var a=e.getCLS,s=e.getFID,n=e.getFCP,r=e.getLCP,i=e.getTTFB;a(t),s(t),n(t),r(t),i(t)}))};i.a.render(Object(y.jsx)(n.a.StrictMode,{children:Object(y.jsx)(S,{})}),document.getElementById("root")),w()}},[[52,1,2]]]);
//# sourceMappingURL=main.6d7cb17f.chunk.js.map